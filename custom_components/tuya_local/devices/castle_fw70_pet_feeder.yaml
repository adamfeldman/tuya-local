name: Pet feeder
products:
  - id: 1bnq0dygljpp6dpy
    name: Castle FW70
  - id: 1bnq0dygljpp6dpy
    name: WOPET FW70Plus
primary_entity:
  entity: sensor
  name: Status
  icon: "mdi:paw"
  dps:
    - id: 4
      type: string
      # feed_state
      name: sensor
    # - id: 6
    #   type: string
    #   name: food status
    # - id: 118
    #   type: string
    #   name: feeding record
    #   optional: true
secondary_entities:
  - entity: sensor
    name: food status
    class: problem
    category: diagnostic
    dps:
      - id: 105
        type: integer
        name: sensor
        optional: true
        mapping:
          - dps_val: enough
            value: false
  # - entity: light
  #   translation_key: indicator
  #   category: config
  #   dps:
  #     - id: 19
  #       type: boolean
  #       name: switch
  #       optional: true
  # - entity: button
  #   name: factory_reset
  #   class: restart
  #   category: config
  #   dps:
  #     - id: 24
  #       type: boolean
  #       # factory_reset
  #       name: button
  #       optional: true
  - entity: sensor
    class: battery
    category: diagnostic
    dps:
      - id: 10
        type: integer
        name: sensor
        optional: true
        mapping:
          - dps_val: high
            value: 80
          - dps_val: low
            value: 20
  - entity: sensor
    name: charge_state
    class: battery
    category: diagnostic
    dps:
      - id: 11
        type: boolean
        name: sensor
        optional: true
        mapping:
          - dps_val: null
            value: false
  # - entity: sensor
  #   name: Food bucket
  #   icon: "mdi:fridge"
  #   category: diagnostic
  #   dps:
  #     - id: 239
  #       type: string
  #       name: sensor
  #       optional: true
  - entity: sensor
    name: Food blockage
    class: problem
    category: diagnostic
    dps:
      - id: 105
        type: integer
        name: sensor
        optional: true
        # mapping:
        #   - dps_val: null
        #     value: false
  - entity: sensor
    name: fault
    class: problem
    category: diagnostic
    dps:
      - id: 13
        type: integer
        name: sensor
        optional: true
        mapping:
          - dps_val: null
            value: false
  - entity: sensor
    name: CancelException
    class: problem
    category: diagnostic
    dps:
      - id: 109
        type: string
        name: sensor
        optional: true
        mapping:
          - dps_val: null
            value: false
  - entity: number
    name: Manual feed
    icon: "mdi:food-drumstick"
    dps:
      - id: 3
        type: integer
        name: value
        unit: portions
        optional: true
        persist: false
        range:
          min: 1
          max: 20
      - id: 103
        type: integer
        name: report
        optional: true
